/*
* Chico UI 0.10.2 MIT Licence
* @autor <chico@mercadolibre.com>
* @link http://www.chico-ui.com.ar
* @team Hernan Mammana, Leandro Linares, Guillermo Paz, Natalia Devalle
*/
;(function($){var ch=window.ch={version:"0.10.2",instances:{},features:{},init:function(){$("html").removeClass("no-js"),ch.features=ch.support(),ch.utils.document.bind("keydown",function(a){ch.keyboard(a)})},utils:{body:$("body"),html:$("html"),window:$(window),document:$(document),zIndex:1e3,index:0,isTag:function(a){return/<([\w:]+)/.test(a)},isSelector:function(a){if(typeof a!="string")return!1;for(var b in $.expr.match)if($.expr.match[b].test(a)&&!ch.utils.isTag(a))return!0;return!1},inDom:function(a,b){if(typeof a!="string")return!1;var a=a.replace(/(\!|\"|\$|\%|\&|\'|\(|\)|\*|\+|\,|\/|\;|\<|\=|\>|\?|\@|\[|\\|\]|\^|\`|\{|\||\}|\~)/gi,function(a,b){return"\\\\"+b});return $(a,b).length>0},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isUrl:function(a){return/^((http(s)?|ftp|file):\/{2}(www)?|www.|((\/|\.{1,2})([\w]|\.{1,2})*\/)+|(\.\/|\/|\:\d))([\w\-]*)?(((\.|\/)[\w\-]+)+)?([\/?]\S*)?/.test(a)},avoidTextSelection:function(){$.each(arguments,function(a,b){$.browser.msie?$(b).attr("unselectable","on"):$.browser.opera?$(b).bind("mousedown",function(){return!1}):$(b).addClass("ch-user-no-select")});return},hasOwn:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},getStyles:function(a,b){if(window.getComputedStyle)return getComputedStyle(a,"").getPropertyValue(b);b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});return a.currentStyle[b]}},events:{LAYOUT:{CHANGE:"change"},VIEWPORT:{CHANGE:"change"},KEY:{ENTER:"enter",ESC:"esc",LEFT_ARROW:"left_arrow",UP_ARROW:"up_arrow",RIGHT_ARROW:"right_arrow",DOWN_ARROW:"down_arrow",BACKSPACE:"backspace"}}};ch.clon=function(a){obj={};for(x in a)obj[x]=a[x];return obj},ch.factory=function(a){var b=a.component||a,c=function(b){$.fn[b]=function(a){var c=[],d=this,e=arguments;d.each(function(d,f){var g=a||{},h={};h.type=b,h.element=f,h.$element=$(f),h.uid=ch.utils.index+=1;switch(typeof g){case"number":var i=g;g={},g.value=i,e[1]&&(g.msg=e[1]);break;case"string":var j=g;g={},g.msg=j;break;case"function":var k=g;g={},g.lambda=k,e[1]&&(g.msg=e[1])}var l=ch[b].call(h,g);l=ch.utils.hasOwn(l,"public")?l["public"]:l;if(l.type){var m=l.type;ch.instances[m]||(ch.instances[m]=[]),ch.instances[m].push(l)}l.exists&&(l=l.object),c.push(l)});return c.length>1?c:c[0]},a.callback&&a.callback()};ch[b]?c(b):ch.get({method:"component",component:b,script:a.script?a.script:"src/js/"+b+".js",styles:a.style?a.style:"src/css/"+b+".css",callback:c})},ch.get=function(a){if(a.style){var b=document.createElement("link");b.href=a.style,b.rel="stylesheet",b.type="text/css"}if(a.script){var c=document.createElement("script");c.src=a.script}var d=document.getElementsByTagName("head")[0]||document.documentElement,e=!1;c.onload=c.onreadystatechange=function(){!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(e=!0,a.callback&&a.callback(a.component),c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c))},a.script&&d.insertBefore(c,d.firstChild),a.style&&d.appendChild(b)},ch.support=function(){var a=document.body||document.documentElement,b=function(){var b=a.style;return b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.OTransition!==undefined||b.transition!==undefined}(),c=function(){var b=!1,c=document.createElement("div");c.style.position="fixed",c.style.top="10px",a.appendChild(c),c.offsetTop===10&&(b=!0),a.removeChild(c);return b}();return{transition:b,fixed:c}},ch.extend=function(a){"use strict";return{as:function(b,c){ch[b]=function(d){d[b]=d.value||!0,d=c?c(d):d||{},d.messages=d.messages||{},ch.utils.hasOwn(d,"msg")&&(d.messages[b]=d.msg,d.msg=null,delete d.msg);return ch[a].call(this,d)},ch.factory(b)}}},ch.controllers=function(){var a=this;a=ch.uiobject.call(a),a.parent=ch.clon(a),a.children=[];return a},ch.controls=function(){var a=this,b=a.conf;a=ch.uiobject.call(a),a.parent=ch.clon(a),a.createFloat=function(c){c.position={context:b.context||c.context||c.$element||a.$element,offset:c.offset,points:c.points};var d=ch.floats.call({element:ch.utils.hasOwn(c,"$element")?c.$element[0]:a.element,$element:c.$element||a.$element,uid:ch.utils.index+=1,type:c.type||a.type,conf:c});return d};return a},ch.floats=function(){var a=this,b=a.conf;a=ch.uiobject.call(a),a.parent=ch.clon(a),a.active=!1,a.source=b.content||b.msg||b.ajax||a.element.href||a.$element.parents("form").attr("action"),a.$container=function(){var c,d=ch.utils.hasOwn(b,"closeButton")&&b.closeButton,e=['<div role="'+b.aria.role+'"'];if(ch.utils.hasOwn(b.aria,"identifier")){var f="ch-"+a.type+"-"+(ch.utils.hasOwn(ch.instances,a.type)?ch.instances[a.type].length+1:"1");e.push(' id="'+f+'"'),a.$element.attr(b.aria.identifier,f)}e.push(' class="ch-'+a.type+(ch.utils.hasOwn(b,"classes")?" "+b.classes:"")+'"'),e.push(' style="z-index:'+(ch.utils.zIndex+=1)+";"),ch.utils.hasOwn(b,"width")&&e.push("width:"+b.width+(typeof b.width=="number"?"px;":";")),ch.utils.hasOwn(b,"height")&&e.push("height:"+b.height+(typeof b.height=="number"?"px;":";")),e.push('">'),ch.utils.hasOwn(b,"cone")&&e.push('<div class="ch-cone"></div>'),d&&e.push('<div class="btn close" style="z-index:'+(ch.utils.zIndex+=1)+'"></div>'),e.push("</div>"),c=$(e.join("")),d&&(c.bind("click",function(b){$(b.target||b.srcElement).hasClass("close")&&a.innerHide(b)}),ch.utils.document.bind(ch.events.KEY.ESC,function(b){a.innerHide(b)})),b.fx=ch.utils.hasOwn(b,"fx")?b.fx:!0,b.position=b.position||{},b.position.element=c,b.position.reposition=ch.utils.hasOwn(b,"reposition")?b.reposition:!0,a.position=ch.positioner(b.position);return c}(),a.$content=$('<div class="ch-'+a.type+'-content">').appendTo(a.$container),a["public"].on("contentLoad",function(c,d){a.$content.html(a.staticContent),ch.utils.hasOwn(b,"onContentLoad")&&b.onContentLoad.call(d,a.staticContent),a.position("refresh")}),a["public"].on("contentError",function(c,d){a.$content.html(a.staticContent);var e=a.source;ch.utils.hasOwn(b,"onContentError")&&b.onContentError.call(d.context,d.jqXHR,d.textStatus,d.errorThrown),a.source=e,a.staticContent=undefined,ch.utils.hasOwn(b,"position")&&ch.positioner(b.position)}),a.innerShow=function(c){c&&a.prevent(c);if(!a.active){a.$container.appendTo("body").css("z-index",ch.utils.zIndex++),a.content(),b.fx?a.$container.fadeIn("fast",function(){a.trigger("show"),a.callbacks("onShow")}):(a.$container.removeClass("ch-hide"),a.trigger("show"),a.callbacks("onShow")),a.position("refresh"),a.active=!0;return a}},a.innerHide=function(c){c&&c.stopPropagation();if(!!a.active){var d=function(){a.active=!1,a.trigger("hide"),a.callbacks("onHide"),a.$container.detach()};b.fx?a.$container.fadeOut("fast",d):(a.$container.addClass("ch-hide"),d());return a}},a.size=function(b,c){if(!c)return a.conf[b];a.conf[b]=c,a.$container[b](c),a.position("refresh");return a["public"]},a["public"].show=function(b){b!==undefined&&a["public"].content(b),a.innerShow();return a["public"]},a["public"].hide=function(){a.innerHide();return a["public"]},a["public"].position=function(c){var d=a["public"];switch(typeof c){case"object":ch.utils.hasOwn(c,"points")&&(b.position.points=c.points),ch.utils.hasOwn(c,"reposition")&&(b.position.reposition=c.reposition),ch.utils.hasOwn(c,"offset")&&(b.position.offset=c.offset),ch.utils.hasOwn(c,"context")&&(b.position.context=c.context),a.position(b.position);break;case"string":a.position("refresh");break;case"undefined":default:d=a.position()}return d},a["public"].width=function(b){return a.size("width",b)||a["public"]},a["public"].height=function(b){return a.size("height",b)||a["public"]},a["public"].isActive=function(){return a.active},a.trigger("ready");return a},ch.navs=function(){var a=this,b=a.conf;b.icon=ch.utils.hasOwn(b,"icon")?b.icon:!0,b.open=b.open||!1,b.fx=b.fx||!1,a=ch.uiobject.call(a),a.parent=ch.clon(a),a.active=!1,a.show=function(c){a.prevent(c);if(a.active)return a.hide(c);a.active=!0,a.$trigger.addClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideDown("fast",function(){a.trigger("show"),a.callbacks("onShow")}):(a.$content.removeClass("ch-hide"),a.trigger("show"),a.callbacks("onShow"));return a},a.hide=function(c){a.prevent(c);if(!!a.active){a.active=!1,a.$trigger.removeClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideUp("fast",function(){a.callbacks("onHide")}):(a.$content.addClass("ch-hide"),a.trigger("hide"),a.callbacks("onHide"));return a}},a.configBehavior=function(){a.$trigger.addClass("ch-"+a.type+"-trigger").bind("click",function(b){a.show(b)}),a.$content.addClass("ch-"+a.type+"-content ch-hide"),b.icon&&$('<span class="ico">Drop</span>').appendTo(a.$trigger),b.open&&a.show()},a.$element.addClass("ch-"+a.type);return a},ch.object=function(){var a=this,b=a.conf;a.callbacks=function(c,d){if(ch.utils.hasOwn(b,c)){var e=a.controller?a.controller["public"]:a["public"];return b[c].call(e,d)}},a.trigger=function(b,c){$(a["public"]).trigger("ch-"+b,c)},a.on=function(b,c){b&&c&&$(a["public"]).bind("ch-"+b,c);return a["public"]},a.once=function(b,c){b&&c&&$(a["public"]).one("ch-"+b,c);return a["public"]},a.off=function(b,c){b&&c?$(a["public"]).unbind("ch-"+b,c):b&&$(a["public"]).unbind("ch-"+b);return a["public"]},a["public"]={},a["public"].uid=a.uid,a["public"].element=a.element,a["public"].type=a.type,a["public"].trigger=a.trigger,a["public"].on=a.on,a["public"].once=a.once,a["public"].off=a.off;return a},ch.uiobject=function(){var a=this,b=a.conf;a=ch.object.call(a),a.parent=ch.clon(a),a.staticContent,a.DOMParent,a.originalContent,a.content=function(c){var d=c?!1:!0,c=c,e=ch.utils.isUrl(a.source),f=ch.utils.isSelector(a.source),g=e?!1:ch.utils.inDom(a.source),h=ch.utils.hasOwn(a,"controller")?a.controller:a["public"],i,j=ch.utils.hasOwn(b,"cache")?b.cache:!0;if(d){if(a.source===i){a.staticContent="<p>No content defined for this component</p>",a.trigger("contentLoad");return}if(!j||a.staticContent===i){a.content(a.source);return}if(j&&a.staticContent){var k=ch.cache.get(a.source);if(k&&a.staticContent!=k){a.staticContent=k,a.trigger("contentLoad");return}return}}b.cache=!1;var l=ch.utils.isUrl(c),m=ch.utils.isSelector(c),n=l?!1:ch.utils.inDom(c);a.staticContent=a.source=c;if(l){if(j){var k=ch.cache.get(a.source);if(k){b.cache=j,a.staticContent=k,a.trigger("contentLoad",h);return}}var o,p,q="x=x";a.$element.attr("type")=="submit"&&(o=a.$element.parents("form").attr("method")||"GET",p=a.$element.parents("form").serialize(),q=q+(p!=""?"&"+p:"")),setTimeout(function(){$.ajax({url:a.source,type:o||"GET",data:q,cache:j,async:!0,beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(b,c,d){a.staticContent=b,a.trigger("contentLoad",h),j&&ch.cache.set(a.source,a.staticContent)},error:function(b,c,d){a.staticContent="<p>Error on ajax call.</p>";var e={context:h,jqXHR:b,textStatus:c,errorThrown:d};a.trigger("contentError",e)}})},0),a.$content.html('<div class="loading"></div>'),a.staticContent=i}else m&&n&&(a.originalContent=$(c),a.DOMParent=a.originalContent.parent(),a.staticContent=a.originalContent.clone().removeClass("ch-hide")),j&&ch.cache.set(a.source,a.staticContent),a.originalContent&&a.originalContent.selector==a.source&&(a["public"].on("show",function(){a.originalContent.detach()}),a["public"].on("hide",function(){a.originalContent.appendTo(a.DOMParent||"body")}));b.cache=j,a.staticContent!==i&&a.trigger("contentLoad",h)},a.prevent=function(b){b&&typeof b=="object"&&(b.preventDefault(),b.stopPropagation());return a},a["public"].content=function(b){if(b){a.source=b,a.staticContent=undefined,a.active&&a.content(b);return a["public"]}return a.staticContent};return a},ch.validator=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.object.call(b),b.parent=ch.clon(b);var c=function(){var c={},d=ch.condition.call(b["public"],a.condition);c[d.name]=d;return c}(),d;if(d=function(){var a,d=ch.instances.validator;if(d&&d.length>0)for(var e=0,f=d.length;e<f;e+=1){a=d[e];if(a.element!==b.element)continue;a.extend(c);return{exists:!0,object:a}}}())return d;var e=function(a){if(!b.enabled)return!0;var d,e,g,h,i,j=c.required;if(!j&&a===""&&b.active===!1)return{status:!0};if(b.enabled&&(!b.active||a!==""||j)){b.callbacks("beforeValidate"),b.trigger("beforeValidate");for(d in c){h=d==="required"?b.element:a.toLowerCase(),e=f(d,h);if(!e){b.callbacks("onError",d),b.trigger("error",d),b.active=!0;return{status:!1,condition:d,msg:c[d].message}}}}if(b.active||!b.enabled)b.active=!1;b.callbacks("afterValidate"),b.trigger("afterValidate");return{status:!0}},f=function(a,b){if(b===""&&a!=="required")return!0;var d=!1,a=c[a];d=a.test(b);return d};b.active=!1,b.enabled=!0,b["public"].type="validator",b["public"].conditions=c,b["public"].isActive=function(){return b.active},b["public"].and=function(){return b.$element},b["public"].extend=function(a){$.extend(c,a);return b["public"]},b["public"].clear=function(){b.active=!1;return b["public"]},b["public"].validate=function(a){return e(a)},b["public"].enable=function(a){if(a&&c[a])c[a].enable();else{b.enabled=!0;for(a in c)c[a].enable()}return b["public"]},b["public"].disable=function(a){if(a&&c[a])c[a].disable();else{b.enabled=!1;for(a in c)c[a].disable()}return b["public"]},b.trigger("ready");return b},ch.factory("validator"),ch.cache={map:{},set:function(a,b){ch.cache.map[a]=b},get:function(a){return ch.cache.map[a]},rem:function(a){ch.cache.map[a]=null,delete ch.cache.map[a]},flush:function(){delete ch.cache.map,ch.cache.map={}}},ch.condition=function(a){var b=this,c=!0,d=function(d){if(!c)return!0;if(a.patt)return a.patt.test(d);if(a.expr)return a.expr(d,a.value);if(a.func)return a.func.call(b,d)},e=function(){c=!0;return a},f=function(){c=!1;return a};a=$.extend(a,{test:d,enable:e,disable:f});return a},ch.eraser=function(a){if(typeof a=="number")for(var b in ch.instances){var c=ch.instances[b];for(var d=0,e=c.length;d<e;d+=1)if(c[d].uid==a){delete c[d],c.splice(d,1);return}}else if(a==="meltdown")delete ch.instances,ch.instances={};else for(var b in ch.instances)if(b==a){var c=ch.instances[b];delete ch.instances[b]}},ch.keyboard=function(a){var b={13:"ENTER",27:"ESC",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW",8:"BACKSPACE"};!ch.utils.hasOwn(b,a.keyCode)||ch.utils.document.trigger(ch.events.KEY[b[a.keyCode]],a)},ch.list=function(a){var b=this,c=a&&ch.utils.isArray(a)?a:[],d=function(a,d){if(!a)return c;var e=typeof a;if(e==="number"){a--;return d?d.call(b,a):c[a]}var f=h(),g,i;if(e==="string"||e==="object")while(f--){i=c[f];if(i===a)return d?d.call(b,f):i;for(g in i)if(g===a||i[g]===a)return d?d.call(b,f):i}},e=function(a){if(ch.utils.isArray(a)){var b=0,d=a.length;for(b;b<d;b++)c.push(a[b]);return c}return c.push(a)},f=function(a){if(!a)return b;var e=function(a){return c.splice(a,1)[0]};return d(a,e)},g=function(a){return d(a)},h=function(){return c.length},b={children:c,add:e,rem:f,get:g,size:h};return b},ch.onImagesLoads=function(a){var b=this;a=ch.clon(a),b.conf=a,b.$element.one("load",function(){setTimeout(function(){--b.$element.length<=0&&b.conf.lambda.call(b.$element,this)},200)}).each(function(){if(this.complete||this.complete===undefined){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=a}});return b},ch.factory("onImagesLoads"),ch.preload=function(a){typeof a=="string"&&(a=a.indexOf(",")>0?a.split(","):[a]);for(var b=0;b<a.length;b++){var c=document.createElement("object");c.data=a[b];var d=document.getElementsByTagName("head")[0];d.appendChild(c),d.removeChild(c)}},ch.viewport={width:ch.utils.window.width(),height:ch.utils.window.height(),left:ch.utils.window.scrollLeft(),top:ch.utils.window.scrollTop(),right:ch.utils.window.scrollLeft()+ch.utils.window.width(),bottom:ch.utils.window.scrollTop()+ch.utils.window.height(),element:ch.utils.window,getSize:function(){return{width:this.width=ch.utils.window.width(),height:this.height=ch.utils.window.height()}},getPosition:function(){var a=this.getSize();return{left:0,top:0,right:a.width,bottom:a.height,width:a.width,height:a.height}},getOffset:function(){var a=this.getPosition(),b=ch.utils.window.scrollLeft(),c=ch.utils.window.scrollTop();return{left:this.left=b,top:this.top=c,right:this.right=b+a.right,bottom:this.bottom=c+a.bottom}}},ch.autoComplete=function(a){var b=this;a=ch.clon(a),a.icon=!1,a.type="autoComplete",a.message=a.message||"Please write to be suggested",a.suggestions=a.suggestions,a.jsonpCallback=a.jsonpCallback||"autoComplete",b.conf=a,b=ch.controls.call(b),b.parent=ch.clon(b);var c=function(a,c){b.prevent(c);b.selected!==(a==="bottom"?b.items.length-1:0)&&($(b.items[b.selected]).removeClass("ch-autoComplete-selected"),a==="bottom"?b.selected+=1:b.selected-=1,$(b.items[b.selected]).addClass("ch-autoComplete-selected"))};b.selected=-1,b.suggestions=b.conf.suggestions,b.$content=$('<ul class="ch-autoComplete-list"></ul>'),b.behaviorActived=!1,b.items=[],b["float"]=b.createFloat({content:b.$content,points:a.points,closeButton:!1,points:"lt lb",cache:!1,closeHandler:"button",aria:{role:"tooltip",identifier:"aria-describedby"},width:b.$element.outerWidth()+"px"}),b.populateContent=function(a,c){if(c.length===0)return b;if(c.length===1&&c[0]===b.element.value){b.float.innerHide();return b}var d="";$.each(c,function(a,b){d+='<li data-index="'+a+'">'+b+"</li>"}),b.$content.html(d),b.selected=-1,b["float"].content(b.$content),b.items=b.$content.children(),b.behaviorActived||(b.suggestionsBehavior(a),b.behaviorActived=!0);return b},b.doQuery=function(a){var c=b.$element.val().toLowerCase();if(b.element.value!==""&&a.keyCode!==38&&a.keyCode!==40&&a.keyCode!==13&&a.keyCode!==27)if(b.conf.url!==undefined)var d=$.ajax({url:b.conf.url+c,dataType:"jsonp",jsonpCallback:b.conf.jsonpCallback,crossDomain:!0,success:function(a){}});else if(b.conf.url===undefined){var d=[];for(var e=b.suggestions.length-1;e+1;e--){var f=b.suggestions[e].toLowerCase(),g=f.search(c);g||d.push(b.suggestions[e])}b.populateContent(d)}return b},b.suggestionsBehavior=function(a){ch.utils.document.on(ch.events.KEY.BACKSPACE,function(a,c){b.element.value.length===1&&b.float.innerHide(),b.element.value.length===0&&(b.prevent(c),b.$element.trigger("blur"))}).on(ch.events.KEY.ESC,function(a,c){b.$element.trigger("blur")}).on(ch.events.KEY.ENTER,function(a,c){b.$element.val($(b.items[b.selected]).text()),b.$element.trigger("blur")}).on(ch.events.KEY.UP_ARROW,function(a,b){c("up",b)}).on(ch.events.KEY.DOWN_ARROW,function(a,b){c("bottom",b)}),b.float.$content.on("mouseover mousedown",function(a){var c=a||window.event,d=c.target||c.srcElement,e=c.type;d.tagName==="LI"&&(e==="mouseover"&&($(b.items[b.selected]).removeClass("ch-autoComplete-selected"),b.selected=parseInt(d.getAttribute("data-index")),$(b.items[b.selected]).addClass("ch-autoComplete-selected")),e==="mousedown"&&(b.prevent(c),b.$element.val($(b.items[b.selected]).text()),b.$element.trigger("blur")))})},b.show=function(a){var c=b.element.value;b.doQuery(a),ch.utils.document.on("keyup",function(a){b.doQuery(a),b.float.innerShow()}),b.$content.html(""),c!==""&&b.float.innerShow();return b},b.hide=function(a){b.behaviorActived=!1,b.$content.off("mouseover mousedown"),ch.utils.document.off("keyup "+ch.events.KEY.ENTER+" "+ch.events.KEY.ESC+" "+ch.events.KEY.UP_ARROW+" "+ch.events.KEY.DOWN_ARROW+" "+ch.events.KEY.BACKSPACE),b["float"].innerHide();return b},b.configBehavior=function(){b.$element.bind("focus",function(a){b.show(a)}).bind("blur",function(a){b.hide(a)}).attr("autocomplete","off").addClass("ch-"+b.type+"-trigger");return b},b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide(ch.events.KEY.ESC);return b["public"]},b["public"].suggest=function(a){b.suggestions=a,b.populateContent(window.event,b.suggestions);return b["public"]},b.configBehavior(),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("autoComplete"),ch.blink=function(a){var b=this,c=1,d=a.time||200,e=function(a){function e(){var f=c.toString(16);a.style.backgroundColor="#FFFF"+f+f,c<15?(c+=1,setTimeout(e,d)):b.$element.removeClass("ch-active").attr("aria-live","off").removeAttr("role")}b.$element.addClass("ch-active").attr("role","alert").attr("aria-live","polite"),setTimeout(e,d)};b.$element.hasClass("ch-active")||e(b.element);return b.$element},ch.factory("blink"),ch.calendar=function(a){var b=this;a=ch.clon(a),a.format=a.format||"DD/MM/YYYY",b.conf=a,b=ch.uiobject.call(b),b.parent=ch.clon(b);var c=a.monthsNames||["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],d=a.weekdays||["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],e=function(a){a=a?new Date(a):new Date;return{day:a.getDate(),order:a.getDay(),month:a.getMonth()+1,year:a.getFullYear()}},f=e(),g=function(){if(!!ch.utils.hasOwn(a,"from")&&!!a.from)return a.from==="today"?f:e(a.from)}(),h=function(){if(!!ch.utils.hasOwn(a,"to")&&!!a.to)return a.from==="today"?f:e(a.to)}(),i=function(b){b=b.split("/");var c=[];switch(a.format){case"DD/MM/YYYY":c.push(b[2],b[1],b[0]);break;case"MM/DD/YYYY":c.push(b[2],b[0],b[1])}return c.join("/")},j=f,k=function(){var b=a.selected||a.msg;if(!!b){if(!ch.utils.isArray(b))return b!=="today"?j=e(b):f;$.each(b,function(a,c){ch.utils.isArray(c)?(b[a][0]=b[a][0]!=="today"?e(c[0]):f,b[a][1]=b[a][1]!=="today"?e(c[1]):f):b[a]=b[a]!=="today"?e(c):f});return b}},l=k(),m=function(a,b,c){if(!!l){var d=!1;if(!ch.utils.isArray(l)){if(a===l.year&&b===l.month&&c===l.day)return d=!0}else $.each(l,function(e,f){if(!ch.utils.isArray(f)){if(a===f.year&&b===f.month&&c===f.day)return d=!0}else if(a>=f[0].year&&b>=f[0].month&&c>=f[0].day&&a<=f[1].year&&b<=f[1].month&&c<=f[1].day)return d=!0});return d}},n=function(){var a=['<thead><tr role="row">'];for(var b=0;b<7;b+=1)a.push('<th role="columnheader">'+d[b]+"</th>");a.push("</tr></thead>");return a.join("")}(),o=function(a){var d=function(){var b=(new Date(a.year,a.month,0)).getDate(),c=(new Date([a.year,a.month,"01"].join("/"))).getDay(),d=c+b,e=d%7,f=e>0?7-e:0;return{previous:c,subtotal:d,total:d+f}}(),e=['<table class="ch-calendar-month ch-datagrid" role="grid" id="ch-calendar-grid-'+b.uid+'">',"<caption>"+c[a.month-1]+" - "+a.year+"</caption>",n,"<tbody>",'<tr class="week" role="row">'];for(var i=0;i<d.total;i+=1){if(i<d.previous||i>d.subtotal-1){e.push('<td role="gridcell" class="ch-calendar-other">X</td>');continue}var j=i+1,k=j-d.previous,l=m(a.year,a.month,k);e.push('<td role="gridcell"'+(l?' aria-selected="true"':"")+' class="ch-calendar-day',a.year===f.year&&a.month===f.month&&k===f.day?" ch-calendar-today":null,l?" ch-calendar-selected":null,g&&k<g.day&&a.month===g.month&&a.year===g.year||h&&k>h.day&&a.month===h.month&&a.year===h.year?" ch-disabled":null,'">'+k+"</td>"),j%7===0&&e.push('</tr><tr class="ch-calendar-week" role="row">')}return e.join("")},p={$prev:$('<p class="ch-calendar-prev" aria-controls="ch-calendar-grid-'+b.uid+'" aria-hidden="false"><span>Previous month</span></p>').bind("click",function(a){b.prevent(a),v()}),$next:$('<p class="ch-calendar-next" aria-controls="ch-calendar-grid-'+b.uid+'" aria-hidden="false"><span>Next month</span></p>').bind("click",function(a){b.prevent(a),u()}),update:function(){g&&(g.month>=j.month&&g.year>=j.year?p.$prev.addClass("ch-hide").attr("aria-hidden","true"):p.$prev.removeClass("ch-hide").attr("aria-hidden","false")),h&&(h.month<=j.month&&h.year<=j.year?p.$next.addClass("ch-hide").attr("aria-hidden","true"):p.$next.removeClass("ch-hide").attr("aria-hidden","false"))}},q=function(a){return parseInt(a,10)<10?"0"+a:a},r={"YYYY/MM/DD":function(a){return[a.year,q(a.month),q(a.day)].join("/")},"DD/MM/YYYY":function(a){return[q(a.day),q(a.month),a.year].join("/")},"MM/DD/YYYY":function(a){return[q(a.month),q(a.day),a.year].join("/")}},s=function(a){j=typeof a=="string"?e(a):a,b.$element.children("table").remove(),b.$element.append(o(j)),p.update()},t=function(a){l=a,s(l),b.callbacks("onSelect"),b.trigger("select");return b},u=function(){j.month===12&&(j.month=0,j.year+=1),s([j.year,j.month+1,"01"].join("/")),b.callbacks("onNextMonth"),b.trigger("nextMonth");return b},v=function(){j.month===1&&(j.month=13,j.year-=1),s([j.year,j.month-1,"01"].join("/")),b.callbacks("onPrevMonth"),b.trigger("prevMonth");return b},w=function(){s([j.year+1,j.month,"01"].join("/")),b.callbacks("onNextYear"),b.trigger("nextYear");return b},x=function(){s([j.year-1,j.month,"01"].join("/")),b.callbacks("onPrevYear"),b.trigger("prevYear");return b};b["public"].show=function(){b["float"].show();return b["public"]},b["public"].hide=function(){b["float"].hide();return b["public"]},b["public"].select=function(c){if(!c)return r[a.format](l);t(c==="today"?f:e(i(c)));return b["public"]},b["public"].selectDay=function(b){var c=e([j.year,j.month,b].join("/"));t(c);return r[a.format](c)},b["public"].today=function(){return r[a.format](f)},b["public"].next=function(a){switch(a){case"month":case undefined:default:u();break;case"year":w()}return b["public"]},b["public"].prev=function(a){switch(a){case"month":case undefined:default:v();break;case"year":x()}return b["public"]},b["public"].reset=function(){reset();return b["public"]},b["public"].from=function(a){g=e(a);return b["public"]},b["public"].to=function(a){h=e(a);return b["public"]},p.update(),b.$element.addClass("ch-calendar").prepend(p.$prev).prepend(p.$next).append(o(j)),ch.utils.avoidTextSelection(b.$element),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("calendar"),ch.carousel=function(a){var b=this;a=ch.clon(a),a.pagination=(ch.utils.hasOwn(a,"asyncData")?!1:a.pagination)||!1,a.rolling=!1,a.arrows=ch.utils.hasOwn(a,"arrows")?a.arrows:!0,a.fx=ch.utils.hasOwn(a,"fx")?a.fx:!0,b.conf=a,b=ch.uiobject.call(b),b.parent=ch.clon(b);var c=function(){b.$element.addClass("ch-carousel"),j=ch.utils.html.hasClass("ie6")?b.itemsWidth:0,ch.utils.hasOwn(a,"width")&&b.$element.css("width",a.width),ch.utils.hasOwn(a,"height")&&b.$element.css("height",a.height),!a.fx&&ch.features.transition&&b.$content.addClass("ch-carousel-nofx"),b.$mask.css("height",b.$items.outerHeight()),$.each(b.$items,function(a,c){var d=~~(a/b.itemsPerPage)+1;$(c).attr({"aria-hidden":d!==b.currentPage,"aria-setsize":b.itemsTotal,"aria-posinset":a+1,"aria-label":"page"+d})});var c=b.$items.length;ch.utils.hasOwn(a,"asyncData")&&c<b.itemsPerPage&&b.addItems(b.itemsPerPage-c)},d=function(){var c=$('<p class="ch-prev-arrow'+(a.rolling?"":" ch-hide")+'" role="button" aria-hidden="'+!a.rolling+'"><span>Previous</span></p>').bind("click",b.prev).prependTo(b.$element),d=$('<p class="ch-next-arrow" role="button" aria-hidden="false"><span>Next</span></p>').bind("click",b.next).appendTo(b.$element);c[0].style.top=d[0].style.top=(b.$element.outerHeight()-c.outerHeight())/2+"px",b.manageArrows=function(a){a>1&&a<b.pages?(c.attr("aria-hidden","false").removeClass("ch-hide"),d.attr("aria-hidden","false").removeClass("ch-hide")):a===1?(c.addClass("ch-hide").attr("aria-hidden","true"),d.attr("aria-hidden","false").removeClass("ch-hide")):a===b.pages&&(c.attr("aria-hidden","false").removeClass("ch-hide"),d.addClass("ch-hide").attr("aria-hidden","true"))}},e=function(){var a=$('<ul class="ch-carousel-pages ch-hide" role="tablist">'),c;for(var d=1;d<=b.pages;d+=1){var e=d===b.currentPage?' class="ch-carousel-pages-on" aria-selected="true"':' aria-selected="false"',f=$("<li"+e+' role="tab" aria-controls="page'+d+'">'+d+"</li>").bind("click",function(a){return function(){b.goTo(a)}}(d));a.append(f)}b.$element.append(a),a.css("left",(b.$element.outerWidth()-a.outerWidth())/2).removeClass("ch-hide"),c=a.children(),b.managePagination=function(a){c.eq(b.currentPage-1).removeClass("ch-carousel-pages-on").attr("aria-selected","false"),c.eq(a-1).addClass("ch-carousel-pages-on").attr("aria-selected","true")}},f=function(){var a=b.$mask.outerWidth()-b.itemsWidth;return b.itemsPerPage=a>b.itemsWidth?~~(a/b.itemsWidth):1},g=function(){return b.pages=Math.ceil(b.itemsTotal/b.itemsPerPage)},h=function(){i=b.$mask.outerWidth(),f(),g(),b.itemsMargin=Math.ceil((i-b.itemsWidth*b.itemsPerPage)/b.itemsPerPage/2);if(!(b.itemsMargin<0)){b.$content.detach(),b.goTo(1);var c=b.$items.length;while(c)b.$items[c-=1].style.marginLeft=b.$items[c].style.marginRight=b.itemsMargin+"px";b.$content.css("width",(b.itemsWidth+b.itemsMargin*2)*b.$items.length+j).appendTo(b.$mask),a.arrows&&(b.$element.find(".ch-prev-arrow, .ch-next-arrow").remove(),b.pages>1&&d()),a.pagination&&(b.$element.find(".ch-carousel-pages").remove(),b.pages>1&&e())}},i,j,k=!1;b.$content=$('<div class="ch-carousel-content">'),b.$collection=b.$element.children().addClass("ch-carousel-list").attr("role","list").appendTo(b.$content),b.$items=b.$collection.children().addClass("ch-carousel-item").attr("role","listitem"),b.$mask=$('<div class="ch-carousel-mask" role="tabpanel"'+(a.arrows?' style="margin:0 50px;"':"")+">").append(b.$content).appendTo(b.$element),b.queue=a.asyncData||[],b.itemsTotal=b.$items.length+b.queue.length,b.itemsWidth=b.$items.outerWidth(),b.itemsMargin=0,b.itemsPerPage=f(),b.pages=g(),b.currentPage=1,b.addItems=function(c){var d=b.queue.splice(0,c),e=ch.utils.hasOwn(a,"asyncRender"),f=b.$items.length;for(var g=0;g<c;g+=1){var h=~~(f/b.itemsPerPage)+1;d[g]='<li class="ch-carousel-item" role="listitem" aria-hidden="'+(h!==b.currentPage)+'" aria-setsize="'+b.itemsTotal+'" aria-posinset="'+(f+=1)+'" aria-label="page'+h+'" style="margin-right: '+b.itemsMargin+"px; margin-left: "+b.itemsMargin+'px;">'+(e?a.asyncRender(d[g]):d[g])+"</li>"}b.$content.css("width",(b.itemsWidth+b.itemsMargin*2)*b.itemsTotal+j),b.$collection.append(d.join("")),b.$items=b.$collection.children(),b.callbacks("onItemsAdded"),b.trigger("itemsAdded")},b.asyncItemsLoad=function(){if(b.queue.length!==0){var a=b.currentPage*b.itemsPerPage,c=b.$items.length;if(a<c)return;var d=a%c;d=d===0?b.itemsPerPage:d,d=b.queue.length<d?b.queue.length:d,b.addItems(d)}},b.goTo=function(c){if(c===b.currentPage||c>b.pages||c<1||isNaN(c))return b;!a.rolling&&a.arrows&&b.manageArrows(c),a.pagination&&b.managePagination(c);var d=-(i*(c-1));a.fx&&ch.features.transition?b.$content.css("left",d):a.fx?b.$content.animate({left:d}):b.$content.css("left",d),b.currentPage=c,$.each(b.$items,function(a,d){$(d).attr("aria-hidden",~~(a/b.itemsPerPage)+1!==c)}),b.callbacks("onSelect"),b.trigger("select");return b},b.prev=function(){b.goTo(b.currentPage-1),b.callbacks("onPrev"),b.trigger("prev");return b},b.next=function(){b.goTo(b.currentPage+1),ch.utils.hasOwn(a,"asyncData")&&b.asyncItemsLoad(),b.callbacks("onNext"),b.trigger("next");return b},b["public"].itemsPerPage=function(){return b.itemsPerPage},b["public"].select=function(c){if(ch.utils.hasOwn(a,"asyncData"))return b["public"];b.goTo(c);return b["public"]},b["public"].page=function(a){if(!a)return b.currentPage;return b["public"].select(a)},b["public"].prev=function(){b.prev();return b["public"]},b["public"].next=function(){b.next();return b["public"]},b["public"].redraw=function(){h();return b["public"]},c(),h(),ch.utils.hasOwn(a,"width")||(ch.utils.window.bind("resize",function(){k=!0}),setInterval(function(){!k||(k=!1,h())},350)),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("carousel"),ch.countdown=function(a){var b=this;a=ch.clon(a),a.max=parseInt(a.max)||a.value||parseInt(a.msg)||500,a.plural=a.plural||"# characters left.",a.singular=a.singular||"# character left.",b.conf=a,b=ch.controls.call(b),b.parent=ch.clon(b);var c=b.element.value.length,d=a.max-c,e=function(){var c=d===1?a.singular:a.plural,e=b.$element.parent();$display=$('<p class="ch-form-hint">'+c.replace("#",d)+"</p>").appendTo(e);return function(b){var c=(b!==1?a.plural:a.singular).replace(/\#/g,b);$display.text(c),d=b}}();b.process=function(){var f=b.element.value.length;f>c&&f<=a.max||f<c&&f>=0?(e(d-(f-c)),c=f):f>c&&f>a.max&&(b.element.value=b.element.value.substr(0,a.max))},b.$element.on("keyup keypress paste",function(){setTimeout(b.process,0)}),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("countdown"),ch.extend("validation").as("custom",function(a){a.lambda||alert('Custom Validation fatal error: Need a function to evaluate, try $().custom(function(){},"Message");'),a.condition={name:"custom",func:a.lambda,message:a.msg||a.message||"Error"};return a}),ch.datePicker=function(a){var b=this;a=ch.clon(a),a.format=a.format||"DD/MM/YYYY",a.points=a.points||"ct cb",a.closable=ch.utils.hasOwn(a,"closable")?a.closable:!0,b.conf=a,b=ch.controls.call(b),b.parent=ch.clon(b),b.process=function(c){c.target.nodeName==="TD"&&c.target.className.indexOf("ch-disabled")===-1&&c.target.className.indexOf("ch-calendar-other")===-1&&(b.element.value=b.calendar.selectDay(c.target.innerHTML),a.closable&&b["float"].innerHide())},b.calendar=$("<div>").bind("click",function(a){b.process(a)}).calendar({format:a.format,from:a.from,to:a.to,selected:a.selected,monthsNames:a.monthsNames,weekdays:a.weekdays}),b["float"]=b.createFloat({$element:$('<p class="ch-datePicker-trigger">Date Picker</p>').insertAfter(b.element),content:b.calendar.element,points:a.points,offset:"0 10",aria:{role:"tooltip",identifier:"aria-describedby"},closeButton:!1,cone:!0}),b["public"].show=function(){b["float"].innerShow();return b["public"]},b["public"].hide=function(){b["float"].innerHide();return b["public"]},b["public"].select=function(a){b.element.value=b.calendar.select(a);return b["public"]},b["public"].today=function(){return b.calendar.today()},b["public"].next=function(a){b.calendar.next(a);return b["public"]},b["public"].prev=function(a){b.calendar.prev(a);return b["public"]},b["public"].reset=function(){b.element.value="",b.calendar.reset();return b["public"]},b["public"].from=function(a){b.calendar.from(a);return b["public"]},b["public"].to=function(a){b.calendar.to(a);return b["public"]},b.element.type="text",b.element.value=a.selected?b.calendar.select():b.element.value,b["float"].$element.css("cursor","pointer").bind("click",function(a){b["float"].innerShow(a)}),b["float"].on("show",function(){ch.utils.document.one("click",b["float"].innerHide)}),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("datePicker"),ch.dropdown=function(a){var b=this;a=ch.clon(a),a.reposition=ch.utils.hasOwn(a,"reposition")?a.reposition:!0,b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b);var c=function(a){var c=0;$.each(a,function(b,d){$(d).bind("mouseenter",function(){c=b,a.eq(c).focus()})});var d=function(d,e){b.prevent(e);c!==(d==="bottom"?a.length-1:0)&&(a.eq(c).blur(),d==="bottom"?c+=1:c-=1,a.eq(c).focus())};ch.utils.document.bind(ch.events.KEY.UP_ARROW,function(a,b){d("up",b)}),ch.utils.document.bind(ch.events.KEY.DOWN_ARROW,function(a,b){d("bottom",b)})};b.$trigger=function(){var a=b.$element.children().eq(0);b.$element.hasClass("secondary")||a.addClass("btn skin");return a}(),b.$content=function(){var c=b.$trigger.next().removeClass("ch-hide").bind("click",function(a){(a.target||a.srcElement).tagName==="A"&&b.hide(),a.stopPropagation()}).attr({role:"menu","aria-hidden":"true"});c.children("a").attr("role","menuitem"),b.position=ch.positioner({element:c,context:b.$trigger,points:a.points||"lt lb",offset:"0 -1",reposition:a.reposition});return c}(),b.show=function(a){b.prevent(a),b.$content.css("z-index",ch.utils.zIndex+=1).attr("aria-hidden","false"),b.$element.hasClass("secondary")&&b.$trigger.css("z-index",ch.utils.zIndex+=1),b.parent.show(a),b.position("refresh"),$.each(ch.instances.dropdown,function(a,c){c.uid!==b.uid&&c.hide()}),ch.utils.document.one("click "+ch.events.KEY.ESC,function(){b.hide()});var d=b.$content.find("a");d.eq(0).focus(),d.length>1&&c(d);return b},b.hide=function(a){b.parent.hide(a),b.$content.attr("aria-hidden","true"),ch.utils.document.unbind(ch.events.KEY.ESC+" "+ch.events.KEY.UP_ARROW+" "+ch.events.KEY.DOWN_ARROW);return b},b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b["public"].position=b.position,b.configBehavior(),ch.utils.avoidTextSelection(b.$trigger),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("dropdown"),ch.expando=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b);var c=b.$element.children(),d={"aria-expanded":a.open,"aria-controls":"ch-expando-"+b.uid},e={id:d["aria-controls"],"aria-hidden":!d["aria-expanded"]};b.$trigger=c.eq(0).attr("role","presentation").wrapInner("<span>").children().attr(d),b.$content=c.eq(1).attr(e),b.show=function(a){b.$trigger.attr("aria-expanded","true"),b.$content.attr("aria-hidden","false"),b.parent.show();return b},b.hide=function(a){b.$trigger.attr("aria-expanded","false"),b.$content.attr("aria-hidden","true"),b.parent.hide();return b},b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b.configBehavior(),b.$trigger.children().attr("role","presentation"),ch.utils.avoidTextSelection(b.$trigger),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("expando"),ch.form=function(a){if(this.$element.find(":submit").length==0||this.$element.attr("action")=="")alert("Form fatal error: The <input type=submit> is missing, or need to define a action attribute on the form tag.");else{if(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)for(var b=0,c=ch.instances.form.length;b<c;b+=1)if(ch.instances.form[b].element===this.element)return{exists:!0,object:ch.instances.form[b]};var d=this;a=ch.clon(a),d.$element.attr("novalidate","novalidate"),d.$submit=d.$element.find("input:submit"),d.conf=a,d=ch.controllers.call(d),d.parent=ch.clon(d);var e=!0,f=function(a){d.callbacks("beforeValidate"),d.trigger("beforeValidate"),e||(e=!0);var b=0,c=d.children.length,f,g=[];for(b;b<c;b+=1){var h=d.children[b];h.hasError()&&g.push(h)}g.length>0?(e=!1,g[0].element.tagName==="DIV"?$(g[0].element).find("input:first").focus():g[0].element.type!=="hidden"&&g[0].element.focus()):e=!0,e?(d.callbacks("onValidate"),d.trigger("validate")):(d.callbacks("onError"),d.trigger("error")),d.callbacks("afterValidate"),d.trigger("afterValidate");return d},g=function(b){d.callbacks("beforeSubmit"),d.trigger("beforeSubmit"),f(b),e||(d.prevent(b),b&&b.stopImmediatePropagation()),e&&ch.utils.hasOwn(a,"onSubmit")&&(d.prevent(b),d.callbacks("onSubmit"));var c=$(d["public"]).data("events"),g=c&&ch.utils.hasOwn(c,"ch-submit");e&&g&&(d.prevent(b),d.trigger("submit")),d.callbacks("afterSubmit"),d.trigger("afterSubmit");return d},h=function(){var a=0,b=d.children.length;for(a;a<b;a+=1)d.children[a].clear();e=!0,d.callbacks("onClear"),d.trigger("clear");return d},i=function(a){h(),d.element.reset(),d.callbacks("onReset"),d.trigger("reset");return d};d["public"].children=d.children,d["public"].messages=a.messages||{},d["public"].validate=function(){f();return d["public"]},d["public"].submit=function(){g();return d["public"]},d["public"].getStatus=function(){return e},d["public"].clear=function(){h();return d["public"]},d["public"].reset=function(){i();return d["public"]},ch.utils.hasOwn(a,"onSubmit")&&(d.$element.bind("submit",function(a){d.prevent(a)}),d.$element.find(":submit").unbind("click")),d.$element.bind("submit",function(a){g(a)}),d.$element.find(":reset, .resetForm").bind("click",function(a){i(a)}),setTimeout(function(){d.trigger("ready")},50);return d}},ch.factory("form"),ch.layer=function(a){var b=this;a=ch.clon(a),a.cone=!0,a.closeButton=ch.utils.hasOwn(a,"closeButton")?a.closeButton:a.event==="click",a.classes=a.classes||"box",a.closeHandler=a.closeHandler||"any",a.aria={},a.aria.role="tooltip",a.aria.identifier="aria-describedby",a.position={},a.position.context=b.$element,a.position.offset=a.offset||"0 10",a.position.points=a.points||"lt lb",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=a.showTime||400,d=a.hideTime||400,e,f,g=function(){e=setTimeout(b.innerShow,c)},h=function(c){if(a.event!=="click"){var e=c.srcElement||c.target,g=c.relatedTarget||c.toElement;if(e===g||g===undefined||g.parentNode===null||e.nodeName==="SELECT")return}f=setTimeout(b.innerHide,d)},i=function(){clearTimeout(e),clearTimeout(f)},j=function(a){a.stopPropagation()};b.closeHandler=a.closeHandler,b.innerShow=function(c){$.each(ch.instances.layer,function(a,c){c!==b["public"]&&c.closable()==="any"&&c.hide()}),b.parent.innerShow(c),a.event==="click"&&a.closeHandler==="button"?b.$container.find(".close").one("click",b.innerHide):a.event==="click"?(ch.utils.document.one("click",b.innerHide),b.$container.bind("click",j)):(i(),b.$container.one("mouseenter",i).bind("mouseleave",h));return b},b.innerHide=function(a){b.$container.unbind("click",j).unbind("mouseleave",h),b.parent.innerHide(a)},b["public"].closable=function(a){if(a!==undefined)b.closeHandler=a;else return b.closeHandler;return b["public"]},a.event==="click"?b.$element.css("cursor","pointer").bind("click",b.innerShow):b.$element.css("cursor","default").bind("mouseenter",b.innerShow).bind("mouseleave",h),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("layer"),ch.menu=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=a.selected-1,d=function(){var d=ch.utils.html.hasClass("ie6")||ch.utils.html.hasClass("ie7")?!1:!0;b.$element.children().each(function(e,f){var g=$(f),h=g.children();if(h.eq(0).prop("tagName")=="A")g.attr("role","presentation"),g.addClass("ch-bellows").children().addClass("ch-bellows-trigger"),b.children.push(h[0]);else{var i=g.expando({fx:d,onShow:function(){c=e,b.callbacks.call(b,"onSelect"),b.trigger("select")}}),j=g.children(),k=$(j[0]),l=$(j[1]);a.accordion||(l.attr("role","menu"),l.children().children().attr("role","menuitem"),l.children().attr("role","presentation")),k.attr("role","presentation"),b.children.push(i)}})},e=function(c){var d,e;if(typeof c=="string"){var f=c.split("#");d=f[0]-1,e=f[1]}else d=c-1;var g=b.children[d];ch.utils.hasOwn(g,"uid")?(g.show(),e&&$(g.element).find("a").eq(e-1).addClass("ch-menu-on"),a.accordion&&$.each(b.children,function(a,c){c.tagName!="A"&&ch.utils.hasOwn(c,"uid")&&b.children[d].uid!=b.children[a].uid&&c.hide()})):b.children[d].addClass("ch-menu-on");return b},f=function(){$.each(b.children,function(a,b){$(b.element).find(".ch-expando-trigger").unbind("click").bind("click",function(){e(a+1)})});return};b["public"].select=function(a){e(a);return b["public"]},d(),a.accordion?(f(),b.$element.addClass("ch-accordion")):(b.$element.addClass("ch-menu"),b.$element.attr("role","navigation")),ch.utils.hasOwn(a,"selected")&&e(a.selected),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("menu"),ch.extend("menu").as("accordion"),ch.modal=function(a){var b=this;a=ch.clon(a),a.classes=a.classes||"box",a.closeButton=ch.utils.hasOwn(a,"closeButton")?a.closeButton:b.type==="modal",a.reposition=!1,a.aria={},a.closeButton?(a.aria.role="dialog",a.aria.identifier="aria-label"):a.aria.role="alert",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=$('<div class="ch-dimmer">');ch.utils.html.hasClass("ie6")&&c.height(parseInt(document.documentElement.clientHeight,10)*3);var d={on:function(){b.active||(c.css("z-index",ch.utils.zIndex+=1).appendTo(ch.utils.body).fadeIn(),b.type==="modal"&&c.one("click",function(a){b.innerHide(a)}),ch.features.fixed||ch.positioner({element:c}),ch.utils.html.hasClass("ie6")&&$("select, object").css("visibility","hidden"))},off:function(){c.fadeOut("normal",function(){c.detach(),ch.utils.html.hasClass("ie6")&&$("select, object").css("visibility","visible")})}};b.innerShow=function(a){d.on(),b.parent.innerShow(a),b.$element.blur();return b},b.innerHide=function(a){d.off(),b.parent.innerHide(a);return b},b.element.tagName==="INPUT"&&b.element.type==="submit"?b.$element.parents("form").bind("submit",function(a){b.innerShow(a)}):b.$element.bind("click",function(a){b.innerShow(a)}),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("modal"),ch.extend("modal").as("transition",function(a){a.closeButton=!1,a.msg=a.msg||a.content||"Please wait...",a.content=$('<div class="loading"></div><p>'+a.msg+"</p>");return a}),ch.extend("validation").as("number",function(a){a.condition={name:"number",patt:/^(-?[0-9\s]+)$/,message:a.msg||a.message};return a}),ch.extend("validation").as("min",function(a){a.condition={name:"min",expr:function(a,b){return a>=b},message:a.msg||a.message,value:a.value};return a}),ch.extend("validation").as("max",function(a){a.condition={name:"max",expr:function(a,b){return a<=b},message:a.msg||a.message,value:a.value};return a}),ch.extend("validation").as("price",function(a){a.condition={name:"price",patt:/^(\d+)[.,]?(\d?\d?)$/,message:a.msg||a.message};return a}),ch.positioner=function(){var a={"lt lb":"ch-left ch-bottom","lb lt":"ch-left ch-top","lt rt":"ch-right","rt rb":"ch-right ch-bottom","rb rt":"ch-right ch-top","cm cm":"ch-center"},b=!1,c=function(){!b||(ch.viewport.getOffset(),ch.utils.window.trigger(ch.events.VIEWPORT.CHANGE),b=!1)};ch.utils.window.bind("resize scroll",function(){b=!0}),setInterval(c,350);return function(b){if(!ch.utils.hasOwn(b,"element"))alert('Chico UI error: Expected to find "element" as required configuration parameter of ch.Positioner');else{b.reposition=b.reposition||!1;var c={},d=$(b.element),e=b.points||"cm cm",f=(b.offset||"0 0").split(" "),g=function(){f[0]=parseInt(f[0],10),f[1]=parseInt(f[1],10);if(!ch.utils.hasOwn(b,"context")||!b.context||b.context==="viewport"){h=!1;return ch.viewport}var a={};a.width=a.height=a.left=a.top=a.right=a.bottom=0,a.element=$(b.context),a.getSize=function(){return{width:i.width=a.element.outerWidth(),height:i.height=a.element.outerHeight()}},a.getOffset=function(){var b=a.element.offset(),c=a.getSize(),d=b.left,e=b.top;j||(d-=k.left,e-=k.top);return{left:i.left=d,top:i.top=e,right:i.right=d+c.width,bottom:i.bottom=e+c.height}},h=!0;return a},h,i=g(),j,k=function(){var a=h?i.element.offsetParent()[0]:ch.utils.body[0],b={};b.left=b.top=0,b.getOffset=function(){if(a.tagName!=="BODY"){var b=$(a).offset(),c=parseInt(ch.utils.getStyles(a,"border-left-width"),10),d=parseInt(ch.utils.getStyles(a,"border-top-width"),10);return{left:k.left=b.left+c,top:k.top=b.top+d}}};return b}(),l=function(a){var b=function(a){var b=!h&&ch.features.fixed?ch.viewport.getPosition():i,c;switch(a){case"ll":c=b.left+f[0];break;case"lr":c=b.right+f[0];break;case"rl":c=b.left-d.outerWidth()+f[0];break;case"rr":c=b.right-d.outerWidth()+f[0];break;case"cc":c=b.left+b.width/2-d.outerWidth()/2+f[0];break;case"tt":c=b.top+f[1];break;case"tb":c=b.bottom+f[1];break;case"bt":c=b.top-d.outerHeight()+f[1];break;case"bb":c=b.bottom-d.outerHeight()+f[1];break;case"mm":c=b.top+b.height/2-d.outerHeight()/2+f[1]}return c},c=a.split(" ");return{left:b(c[0].charAt(0)+c[1].charAt(0)),top:b(c[0].charAt(1)+c[1].charAt(1))}},m=function(){var c=l(e);s=a[e];if(!b.reposition)return c;if(e!=="lt lb"&&e!=="rt rb"&&e!=="lt rt")return c;var g,h=e,i=f[0],m=f[1];j||(i+=k.left,m+=k.top),c.top+m+d.outerHeight()>ch.viewport.bottom&&e!=="lt rt"&&(h=h.charAt(0)+"b "+h.charAt(3)+"t",g=l(h),g.friendly=a[h],g.top+m>ch.viewport.top&&(c.top=g.top-2*f[1],c.left=g.left,s=g.friendly));if(c.left+i+d.outerWidth()>ch.viewport.right){var n=h.charAt(0)==="r"?"l":"r";h=n+h.charAt(1)+" "+n+h.charAt(4),g=l(h),g.friendly=a[h],g.left+i>ch.viewport.left&&(c.top=g.top,c.left=g.left-2*f[0],s=g.friendly)}return c},n={},o=function(){var a,b=function(a){a.removeClass("ch-left ch-top ch-right ch-bottom ch-center").addClass(s)};a=m();if(a.left!==n.left||a.top!==n.top)n=a,b(d.css({left:a.left,top:a.top})),h&&b(i.element)},p=function(){j=d.parent().length>0&&d.parent().prop("tagName")==="BODY",k.getOffset(),h&&i.getOffset(),o()},q=function(a){!d.is(":visible")||(h&&(k.getOffset(),i.getOffset()),o())},r=function(){!h&&ch.features.fixed?(d.css("position","fixed"),ch.utils.window.bind("resize",q)):(d.css("position","absolute"),ch.utils.window.bind(ch.events.VIEWPORT.CHANGE+" "+ch.events.LAYOUT.CHANGE,q))},s=a[e];c.position=function(a){var h=c;switch(typeof a){case"object":ch.utils.hasOwn(a,"points")&&(e=a.points),ch.utils.hasOwn(a,"reposition")&&(b.reposition=a.reposition),ch.utils.hasOwn(a,"offset")&&(f=a.offset.split(" ")),ch.utils.hasOwn(a,"context")&&(b.context=a.context,a.context==="viewport"&&(b.context=undefined),i=g(),r()),p();break;case"string":a!=="refresh"&&alert('Chico UI error: expected to find "refresh" parameter on position() method of Positioner component.'),p();break;case"undefined":default:h={context:i.element,element:d,points:e,offset:f.join(" "),reposition:b.reposition}}return h},r(),p();return c.position}}}(),ch.extend("validation").as("required",function(a){a.condition={name:"required",expr:function(a){var b=$(a),c=b.hasClass("options")||b.hasClass("ch-form-options")?"OPTIONS":a.tagName;switch(c){case"OPTIONS":return b.find("input:checked").length!==0;case"SELECT":var d=b.val();return d!="-1"&&d!="";case"INPUT":case"TEXTAREA":return $.trim(b.val()).length!==0}},message:a.msg||a.message,value:a.value};return a}),ch.extend("validation").as("string",function(a){a.condition={name:"string",patt:/^([a-zA-Z\u00C0-\u00C4\u00C8-\u00CF\u00D2-\u00D6\u00D9-\u00DC\u00E0-\u00E4\u00E8-\u00EF\u00F2-\u00F6\u00E9-\u00FC\u00C7\u00E7\s]*)$/,message:a.msg||a.message};return a}),ch.extend("validation").as("email",function(a){a.condition={name:"email",patt:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/,message:a.msg||a.message};return a}),ch.extend("validation").as("url",function(a){a.condition={name:"url",patt:/^((https?|ftp|file):\/\/|((www|ftp)\.)|(\/|.*\/)*)[a-z0-9-]+((\.|\/)[a-z0-9-]+)+([/?].*)?$/,message:a.msg||a.message};return a}),ch.extend("validation").as("minLength",function(a){a.condition={name:"minLength",expr:function(a,b){return a.length>=b},message:a.msg||a.message,value:a.value};return a}),ch.extend("validation").as("maxLength",function(a){a.condition={name:"maxLength",expr:function(a,b){return a.length<=b},message:a.msg||a.message,value:a.value};return a}),ch.tabNavigator=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=window.location.hash.replace("#!",""),d=!1,e=a.selected-1||a.value-1||0,f=function(){b.$triggers.find("a").each(function(a,c){var d={};d.uid=b.uid+"#"+a,d.type="tab",d.element=c,d.$element=$(c),d.controller=b["public"];var f={};f.open=e==a,f.onShow=function(){e=a},ch.utils.hasOwn(b.conf,"cache")&&(f.cache=b.conf.cache),ch.utils.hasOwn(b.conf,"onContentLoad")&&(f.onContentLoad=b.conf.onContentLoad),ch.utils.hasOwn(b.conf,"onContentError")&&(f.onContentError=b.conf.onContentError),b.children.push(ch.tab.call(d,f)),$(c).unbind("click").bind("click",function(c){b.prevent(c),g(a+1)})});return},g=function(a){a=b.children[a-1];if(a!==b.children[e]){$.each(b.children,function(b,c){a!==c&&c.hide()}),a.show(),window.location.hash="#!"+a.$content.attr("id"),b.callbacks("onSelect"),b.trigger("select");return b}};b.$triggers=b.$element.children(":first").addClass("ch-tabNavigator-triggers").attr("role","tablist"),b.$content=b.$triggers.next().addClass("ch-tabNavigator-content box").attr("role","presentation"),b["public"].children=b.children,b["public"].select=function(a){g(a);return b["public"]},b["public"].getSelected=function(){return e+1},b.$element.addClass("ch-tabNavigator"),f();for(var h=b.children.length;h-=1;)if(b.children[h].$content.attr("id")===c){g(h+1),d=!0;break}setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("tabNavigator"),ch.tab=function(a){var b=this;a=ch.clon(a),a.icon=!1,b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b);var c=function(){var a=b.element.href.split("#"),c=b.$element.parents(".ch-tabNavigator"),d=c.find("#"+a[1]);if(d.length>0)return d;b.source=b.element.href;var e=a.length===2?a[1]:"ch-tab"+b.uid.replace("#","-");return $('<div id="'+e+'" role="tabpanel" class="ch-hide">').appendTo(c.children().eq(1))};b.$trigger=b.$element,b.$content=c(),b.show=function(a){b.prevent(a),ch.utils.hasOwn(b,"source")&&b.content(),b.parent.show(a),b.$content.attr("aria-hidden","false");return b},b.hide=function(a){b.prevent(a),b.parent.hide(a),b.$content.attr("aria-hidden","true");return b},b["public"].on("contentLoad",function(c,d){b.$content.html(b.staticContent),ch.utils.hasOwn(a,"onContentLoad")&&a.onContentLoad.call(d,b.staticContent)}),b["public"].on("contentError",function(c,d){b.$content.html(b.staticContent);var e=b.source;ch.utils.hasOwn(a,"onContentError")&&a.onContentError.call(d.context,d.jqXHR,d.textStatus,d.errorThrown),b.source=e,b.staticContent=undefined}),b.configBehavior(),b.$content.attr({role:"tabpanel","aria-hidden":b.$content.hasClass("ch-hide")}),b.$trigger.attr({role:"tab","arial-controls":b.$content.attr("id")});return b},ch.tooltip=function(a){var b=this;a=ch.clon(a),a.cone=!0,a.content="<span>"+(b.element.title||b.element.alt)+"</span>",a.closeButton=ch.utils.hasOwn(a,"closeButton"),a.aria={},a.aria.role="tooltip",a.aria.identifier="aria-describedby",a.position={},a.position.context=$(b.element),a.position.offset=a.offset||"0 10",a.position.points=a.points||"lt lb",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=b.element.title?"title":"alt",d=b.element.title||b.element.alt;b.innerShow=function(a){$.each(ch.instances.tooltip,function(a,c){c!==b["public"]&&c.hide()}),b.element[c]="",b.parent.innerShow(a);return b},b.innerHide=function(a){b.element[c]=d,b.parent.innerHide(a);return b},b.$element.bind("mouseenter",b.innerShow).bind("mouseleave",b.innerHide),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("tooltip"),ch.validation=function(a){var b=this;a=ch.clon(a),a.closeButton=ch.utils.hasOwn(a,"closeButton"),a.offset=a.offset||"15 0",a.points=a.points||"lt rt",b.conf=a,b=ch.controls.call(b),b.parent=ch.clon(b);var c=b.validator=function(){var c={};c.condition=a.condition;return b.$element.validator(c)}(),d;if(d=function(){var a,c=ch.instances.validation;if(c&&c.length>0)for(var d=0,e=c.length;d<e;d+=1){a=c[d];if(a.element!==b.element)continue;return{exists:!0,object:a}}}())return d;var e=b.form=function(){if(!(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)){b.$element.parents("form").form();var d=ch.instances.form.length-1;return ch.instances.form[d]}var a=0,c=ch.instances.form.length;for(a;a<c;a+=1)if(ch.instances.form[a].element===b.$element.parents("form")[0])return ch.instances.form[a]}();e.children.push(b["public"]);var f=b.$element.hasClass("options")||b.$element.hasClass("ch-form-options")||b.element.tagName=="SELECT"?"change":"blur",g=function(){b.$element.removeClass("error ch-form-error"),b.float.innerHide(),c.clear(),b.callbacks("onClear"),b.trigger("clear")},h=function(){return b.element.value};b.enabled=!0,b.float=b.createFloat({$element:function(){var a;if(b.$element.hasClass("options")||b.$element.hasClass("ch-form-options"))if(b.$element.find("h4").length>0){var c=b.$element.find("h4");c.wrapInner("<span>"),a=c.children()}else b.$element.prev().prop("tagName")=="LEGEND"?a=b.$element.prev():a=$(b.$element.find("label")[0]);else a=b.$element;return a}(),type:"validation",content:'<p class="ch-message ch-error">Error.</p>',cone:!0,cache:!1,closeButton:a.closeButton,aria:{role:"alert"},offset:a.offset,points:a.points}),b.process=function(){if(b.$element.attr("disabled")||!b.enabled)return!1;b.callbacks("beforeValidate"),b.trigger("beforeValidate");var a=c.validate(h()),d=!a.status;d?((b.$element.prop("tagName")==="INPUT"||b.$element.prop("tagName")==="TEXTAREA")&&b.$element.addClass("error ch-form-error"),b.float["public"].show('<p class="ch-message ch-error">'+(a.msg||e.messages[a.condition]||"Error")+"</p>"),b.$element.data("events")||b.$element.one(f,b.process),b.callbacks("onError",a.condition),b.trigger("error",a.condition)):(b.$element.removeClass("error ch-form-error"),b.float.innerHide()),b.callbacks("afterValidate"),b.trigger("afterValidate");return d},b["public"].type="validation",b["public"].hasError=function(){return b.process()},b["public"].validate=function(){b.process();return b["public"]},b["public"].clear=function(){g();return b["public"]},b["public"].and=function(){return b.$element},b["public"].form=e,b["public"].validator=c,b["public"].helper=b.float["public"],b["public"].float=b.float["public"],b["public"].enable=function(a){c.enable(a),a||(b.enabled=!0);return b["public"]},b["public"].disable=function(a){g(),c.disable(a),a||(b.enabled=!1);return b["public"]},b["public"].isActive=function(){return c.isActive()},b.trigger("ready");return b},ch.factory("validation"),ch.zoom=function(a){var b=this;a=ch.clon(a),a.fx=a.fx||!1,a.cache=!1,a.aria={},a.aria.role="tooltip",a.aria.identifier="aria-describedby",a.position={},a.position.context=a.context||b.$element,a.position.offset=a.offset||"20 0",a.position.points=a.points||"lt rt",a.reposition=!1,a.message=a.message||"Loading zoom...",a.width=a.width||300,a.height=a.height||300,b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=$('<p class="ch-zoom-loading loading ch-hide">'+a.message+"</p>").appendTo(b.$element),d=b.$element.offset(),e={$shape:$('<div class="ch-seeker ch-hide">'),width:0,height:0},f=function(){var a=b.$element.children("img");a.onImagesLoads(function(){f.width=a.prop("width"),f.height=a.prop("height"),b.$element.css({width:f.width,height:f.height}),c.css({left:(f.width-c.width())/2,top:(f.height-c.height())/2})});return{$image:a,offset:{},width:0,height:0}}(),g={width:0,height:0},h=function(){var d=b.source=$('<img src="'+b.element.href+'">');d.onImagesLoads(function(){h.width=d.prop("width"),h.height=d.prop("height"),g.width=h.width/f.width,g.height=h.height/f.height;var i=~~(a.width/g.width),j=~~(a.height/g.height);e.width=i/2,e.height=j/2,e.$shape.css({width:i,height:j}).appendTo(b.$element),c.remove(),h.ready=!0});return{$image:d,ready:!1,width:0,height:0}}(),i=function(a){var b,c;a.pageX-e.width<d.left?b=0:a.pageX+e.width>f.width+d.left?b=f.width-e.width*2-2:b=a.pageX-d.left-e.width,a.pageY-e.height<d.top?c=0:a.pageY+e.height>f.height+d.top?c=f.height-e.height*2-2:c=a.pageY-d.top-e.height,e.$shape.css({left:b,top:c}),h.$image.css({left:-g.width*b,top:-g.height*c})};b.innerShow=function(){if(!h.ready){c.removeClass("ch-hide");return b}d=b.$element.offset(),b.$element.bind("mousemove",function(a){i(a)}),e.$shape.removeClass("ch-hide"),b.parent.innerShow();return b},b.innerHide=function(){if(!h.ready){c.addClass("ch-hide");return b}b.$element.unbind("mousemove"),e.$shape.addClass("ch-hide"),b.parent.innerHide();return b},b.size=function(a,c){if(c){var d=~~(c/g[a]);e[a]=d/2,e.$shape.css(a,d)}return b.parent.size(a,c)},b["public"].content=function(){return b.content()},b.$element.addClass("ch-zoom-trigger").bind("click",function(a){b.prevent(a)}).bind("mouseenter",b.innerShow).bind("mouseleave",b.innerHide),setTimeout(function(){b.trigger("ready")},50);return b},ch.factory("zoom");ch.init();})(jQuery);